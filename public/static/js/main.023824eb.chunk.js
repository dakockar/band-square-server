(this["webpackJsonpband-square-client"]=this["webpackJsonpband-square-client"]||[]).push([[0],{110:function(e,t,a){},162:function(e,t){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),s=a.n(r),i=(a(110),a(17)),l=a(31),o=a(65),u=a(7),j=a(8),d=a(10),h=a(9),b=a(18),O=(a(111),a(14)),m=a.n(O),p="http://localhost:5005",x=a(184),f=a(180),g=a(178),v=a(186),y=a(12),S=a(21),N=a(99),C=a(181),w=a(171),k=a(172),I=a(173),L=a(174),U=a(175),T=a(176),E=a(1);var V=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(S.a)(s,2),l=i[0],o=i[1],u=Object(n.useState)(!1),j=Object(S.a)(u,2),d=j[0],h=j[1];return Object(E.jsxs)("div",{children:[Object(E.jsx)(N.a,{className:"grey-text",variant:"link",onClick:function(){return r(!0)},children:"Sign Up"}),Object(E.jsxs)(C.a,{className:"modal-box",show:c,onHide:function(){return r(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(E.jsx)(C.a.Header,{closeButton:!0,children:Object(E.jsx)(C.a.Title,{children:"Sign Up"})}),Object(E.jsx)(C.a.Body,{children:Object(E.jsxs)(w.a,{onSubmit:e.onSignUp,children:[Object(E.jsxs)(k.a,{children:[Object(E.jsx)(I.a,{for:"email",children:"Email"}),Object(E.jsx)(L.a,{onChange:function(e){var t="";e.target.value.length?(t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)?"has-success":"has-danger",o(t)):o(!1)},valid:"has-success"===l,invalid:"has-danger"===l,type:"email",name:"email",id:"email",placeholder:"email"}),Object(E.jsx)(U.a,{children:"We'll never share your email with anyone else."}),Object(E.jsx)(T.a,{valid:!0,children:"Sweet! That email is valid."}),Object(E.jsx)(T.a,{invalid:"true",children:"Please enter a valid email."})]}),Object(E.jsxs)(k.a,{children:[Object(E.jsx)(I.a,{for:"password",children:"Password"}),Object(E.jsx)(L.a,{onChange:function(e){var t="";e.target.value.length?(t=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e.target.value)?"has-success":"has-danger",h(t)):h(!1)},valid:"has-success"===d,invalid:"has-danger"===d,type:"password",name:"password",id:"password",placeholder:"password"}),Object(E.jsx)(T.a,{valid:!0,children:"Nice! Your password is strong!"}),Object(E.jsx)(T.a,{invalid:"true",children:"Your password is not strong enough."}),Object(E.jsx)(U.a,{children:"Password must be at least 8 characters, and include at least 1 letter and 1 number."})]}),Object(E.jsxs)(k.a,{tag:"fieldset",children:[Object(E.jsx)("h6",{children:"Sign me up as:"}),Object(E.jsxs)(k.a,{check:!0,children:[Object(E.jsx)(L.a,{id:"musician",type:"radio",name:"type",value:"musician"}),Object(E.jsx)(I.a,{check:!0,for:"musician",children:"Musician"})]}),Object(E.jsxs)(k.a,{check:!0,children:[Object(E.jsx)(L.a,{id:"owner",type:"radio",name:"type",value:"owner"}),Object(E.jsx)(I.a,{check:!0,for:"owner",children:"Owner"})]})]}),Object(E.jsx)(N.a,{variant:"dark",children:"Sign Up!"})]})})]})]})},_=a(177);var G=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(S.a)(s,2),l=i[0],o=i[1];return Object(E.jsxs)("div",{children:[Object(E.jsx)(_.a,{className:"grey-text",color:"link",onClick:function(){return r(!0)},children:"Sign In"}),Object(E.jsxs)(C.a,{show:c,onHide:function(){return r(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(E.jsx)(C.a.Header,{closeButton:!0,children:Object(E.jsx)(C.a.Title,{children:"Sign In"})}),Object(E.jsx)(C.a.Body,{children:Object(E.jsxs)(w.a,{onSubmit:e.onSignIn,children:[Object(E.jsxs)(k.a,{children:[Object(E.jsx)(I.a,{for:"email",children:"Email"}),Object(E.jsx)(L.a,{onChange:function(e){var t="";e.target.value.length?(t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)?"has-success":"has-danger",o(t)):o(!1)},valid:"has-success"===l,invalid:"has-danger"===l,type:"email",name:"email",id:"email",placeholder:"email"}),Object(E.jsx)(T.a,{valid:!0,children:"Sweet! That email is valid."}),Object(E.jsx)(T.a,{invalid:"true",children:"Please enter a valid email."})]}),Object(E.jsxs)(k.a,{children:[Object(E.jsx)(I.a,{for:"password",children:"Password"}),Object(E.jsx)(L.a,{type:"password",name:"password",id:"password",placeholder:"password"})]}),Object(E.jsx)(_.a,{variant:"dark",children:"Sign In!"})]})})]})]})},F=a.p+"static/media/bandsquare-logo.6fbee2ec.png";var A=function(e){var t=e.user;return Object(E.jsx)(x.a,{className:"navbar",children:e.user?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a.Brand,{as:y.b,to:"/home",children:Object(E.jsx)("img",{className:"logo",src:F,alt:"logo"})}),Object(E.jsx)(x.a.Toggle,{}),Object(E.jsx)(x.a.Collapse,{className:"justify-content-end",children:Object(E.jsx)(x.a.Text,{children:Object(E.jsxs)(f.a,{as:g.a,alignRight:!0,children:[Object(E.jsx)(f.a.Toggle,{className:"grey-text",as:v.a,children:t.firstName||t.email}),Object(E.jsxs)(f.a.Menu,{className:"dropdown-box",children:[Object(E.jsx)(f.a.Item,{as:y.b,to:"/profile",children:"Profile"}),Object(E.jsx)(f.a.Item,{as:y.b,to:"/chat",children:"Chat"}),Object(E.jsx)(f.a.Divider,{}),Object(E.jsx)(f.a.Item,{onClick:e.onSignOut,children:"Sign Out"})]})]})})})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(x.a.Brand,{children:Object(E.jsx)("img",{className:"logo",src:F,alt:"logo"})}),Object(E.jsx)(x.a.Toggle,{}),Object(E.jsxs)(x.a.Collapse,{className:"justify-content-end",children:[Object(E.jsx)(x.a.Text,{children:Object(E.jsx)(G,{onSignIn:e.onSignIn})}),Object(E.jsx)(x.a.Text,{children:Object(E.jsx)(V,{onSignUp:e.onSignUp})})]})]})})};a.p;var z=function(e){return Object(E.jsx)("div",{className:"landing-page",children:Object(E.jsxs)("div",{className:"landing-page-about",children:[Object(E.jsx)("h1",{children:"Band Square"}),"Band square is a unique platform for musicians to connect with each other.",Object(E.jsx)("br",{}),"- Search for bands to join ",Object(E.jsx)("br",{}),"- Search for people to join your band",Object(E.jsx)("br",{}),"- Collaborate with other musicians",Object(E.jsx)("br",{}),"- Book practice rooms",Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),"You have a practice room?",Object(E.jsx)("br",{}),"- List your practice room on the site!"]})})},D=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.user;return e?Object(E.jsxs)("div",{className:"home-page",children:[Object(E.jsx)("h3",{children:"Home page"}),"musician"===e.type?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(y.b,{className:"search-link",to:"/search/musicians",children:["find me a",Object(E.jsx)("br",{}),"talented musician!"]}),Object(E.jsxs)(y.b,{className:"search-link",to:"/search/bands",children:["find me an",Object(E.jsx)("br",{})," awesome band!"]}),Object(E.jsxs)(y.b,{className:"search-link",to:"/search/venues",children:["need a place for my gigs",Object(E.jsx)("br",{})," or rehearsals!"]})]}):Object(E.jsx)("div",{children:"owner's home page"})]}):null}}]),a}(n.Component),M=a(182),B=a(185),J=(a.p,function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(E.jsxs)("div",{className:"error-page",children:[Object(E.jsx)("h1",{children:"404"}),Object(E.jsx)("h2",{children:"PAGE NOT FOUND"}),Object(E.jsx)("h3",{children:"The page you're looking for does not exist."})]})}}]),a}(n.Component)),P=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.filteredUsers,n=e.onSearch;return t?"owner"===t.type?Object(E.jsx)(J,{}):Object(E.jsxs)("div",{className:"search-results",children:[Object(E.jsx)("h1",{children:"musician search"}),Object(E.jsxs)(M.a,{children:[Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,type:"text",name:"instrument",placeholder:"Instrument"})}),Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,type:"text",name:"genre",placeholder:"Genre"})})]}),Object(E.jsx)("h3",{children:"Results:"}),a.map((function(e){return Object(E.jsx)(y.b,{to:"/musician/".concat(e._id),children:Object(E.jsx)(B.a,{className:"card-style-search",children:Object(E.jsxs)(B.a.Body,{children:[Object(E.jsxs)(B.a.Title,{className:"card-title-search",children:[e.firstName," ",e.lastName]}),Object(E.jsx)(B.a.Text,{children:e.instrument}),Object(E.jsx)(B.a.Text,{children:e.genre})]})})},e._id)}))]}):null}}]),a}(n.Component),q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.filteredUsers,n=e.onSearch;return t?"owner"===t.type?Object(E.jsx)(J,{}):Object(E.jsxs)("div",{className:"search-results",children:[Object(E.jsx)("h1",{children:"band search"}),Object(E.jsxs)(M.a,{children:[Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,type:"text",name:"instrument",placeholder:"Instrument"})}),Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,type:"text",name:"genre",placeholder:"Genre"})})]}),Object(E.jsx)("h3",{children:"Results:"}),a.map((function(e){return Object(E.jsx)(y.b,{to:"/musician/".concat(e._id),children:Object(E.jsx)(B.a,{className:"card-style",children:Object(E.jsxs)(B.a.Body,{children:[Object(E.jsxs)(B.a.Title,{children:[e.firstName," ",e.lastName]}),Object(E.jsx)(B.a.Text,{children:e.instrument}),Object(E.jsx)(B.a.Text,{children:e.genre}),e.bandName&&Object(E.jsxs)(B.a.Text,{children:["Band: ",e.bandName]}),Object(E.jsxs)(B.a.Text,{children:["Looking for: ",e.lookingFor]})]})})},e._id)}))]}):null}}]),a}(n.Component),Z=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.filteredVenues,n=e.onSearch;return t?"owner"===t.type?Object(E.jsx)(J,{}):Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{children:"Search for: "}),Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,name:"size",type:"number",placeholder:"Size"})}),Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,name:"location",type:"text",placeholder:"Location"})}),Object(E.jsx)(M.a.Group,{children:Object(E.jsx)(M.a.Control,{onChange:n,name:"title",type:"text",placeholder:"Title"})}),Object(E.jsx)("h3",{children:"Results:"}),a.map((function(e){return Object(E.jsx)(y.b,{to:"/venuesDetails/".concat(e._id),children:Object(E.jsxs)("div",{children:[Object(E.jsx)("h4",{children:e.title}),Object(E.jsx)("p",{children:e.size}),Object(E.jsx)("p",{children:e.location})]})},e._id)}))]}):null}}]),a}(n.Component);var H,R=function(e){var t=e.user;return Object(E.jsx)("div",{className:"profile-page",children:Object(E.jsxs)(B.a,{className:"card-style",children:[Object(E.jsxs)("div",{className:"pic-and-text",children:[Object(E.jsx)(B.a.Img,{variant:"top",src:t.imgUrl}),Object(E.jsx)(B.a.ImgOverlay,{as:y.b,to:"/upload-image",children:"+"}),Object(E.jsxs)(B.a.Body,{children:[Object(E.jsxs)(B.a.Title,{children:[t.firstName," ",t.lastName]}),Object(E.jsx)(B.a.Subtitle,{className:"mb-2 text-muted",children:t.location})]})]}),Object(E.jsxs)(B.a.Body,{children:[Object(E.jsx)(B.a.Text,{children:t.aboutMe}),Object(E.jsx)(B.a.Text,{children:t.genre}),Object(E.jsx)(B.a.Text,{children:t.instrument}),Object(E.jsx)(B.a.Text,{children:t.bandName}),t.lookingFor&&Object(E.jsxs)(B.a.Text,{children:["Looking for: ",t.lookingFor]}),Object(E.jsx)(B.a.Link,{className:"button",as:y.b,to:"/musician-profile/edit",children:"Edit Profile"})]})]})})},Y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={venues:[]},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;m.a.get("".concat(p,"/api/venues/").concat(t._id)).then((function(t){e.setState({venues:t.data})})).catch((function(e){console.log("Error while fetching venues",e)}))}},{key:"render",value:function(){var e=this.props.user,t=this.state.venues;return e?Object(E.jsx)("div",{className:"profile-page",children:Object(E.jsxs)(B.a,{className:"card-style",children:[Object(E.jsx)(B.a.Img,{className:"profile-picture",variant:"top",src:e.imgUrl}),Object(E.jsx)(B.a.ImgOverlay,{classname:"add-picture-btn",as:y.b,to:"/upload-image",children:"+"}),Object(E.jsxs)(B.a.Body,{children:[Object(E.jsxs)(B.a.Title,{children:[e.firstName," ",e.lastName]}),Object(E.jsx)(B.a.Title,{children:"Venues: "}),t.length?Object(E.jsx)(E.Fragment,{children:t.map((function(e){return Object(E.jsx)(B.a.Text,{children:Object(E.jsx)(y.b,{to:"/venue/".concat(e._id),children:e.title})},e._id)}))}):Object(E.jsx)("div",{children:"no venues yet"}),Object(E.jsx)(N.a,{className:"button",as:y.b,to:"/owner-profile/edit",children:"Edit Profile"}),Object(E.jsx)(N.a,{className:"button",as:y.b,to:"/add-venue",children:"Add Venue"})]})]})}):null}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.user;return e?Object(E.jsx)("div",{children:"musician"===e.type?Object(E.jsx)(R,{user:e}):Object(E.jsx)(Y,{user:e})}):null}}]),a}(n.Component),W=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.onEdit;return t?Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Edit Musician Profile"}),Object(E.jsxs)(M.a,{onSubmit:a,children:[Object(E.jsxs)(M.a.Group,{controlId:"firstName",children:[Object(E.jsx)(M.a.Label,{children:"First Name"}),Object(E.jsx)(M.a.Control,{name:"firstName",type:"text",placeholder:"Enter Name",defaultValue:t.firstName})]}),Object(E.jsxs)(M.a.Group,{controlId:"lastName",children:[Object(E.jsx)(M.a.Label,{children:"Last Name"}),Object(E.jsx)(M.a.Control,{name:"lastName",type:"text",placeholder:"Last Name",defaultValue:t.lastName})]}),Object(E.jsxs)(M.a.Group,{controlId:"genre",children:[Object(E.jsx)(M.a.Label,{children:"Genre"}),Object(E.jsx)(M.a.Control,{name:"genre",type:"text",placeholder:"Genre",defaultValue:t.genre})]}),Object(E.jsxs)(M.a.Group,{controlId:"instrument",children:[Object(E.jsx)(M.a.Label,{children:"Instrument"}),Object(E.jsx)(M.a.Control,{name:"instrument",type:"text",placeholder:"Instrument",defaultValue:t.instrument})]}),Object(E.jsxs)(M.a.Group,{controlId:"location",children:[Object(E.jsx)(M.a.Label,{children:"Location"}),Object(E.jsx)(M.a.Control,{name:"location",type:"text",placeholder:"Location",defaultValue:t.location})]}),Object(E.jsxs)(M.a.Group,{controlId:"bandName",children:[Object(E.jsx)(M.a.Label,{children:"Band"}),Object(E.jsx)(M.a.Control,{name:"bandName",type:"text",placeholder:"Band",defaultValue:t.bandName})]}),Object(E.jsxs)(M.a.Group,{controlId:"lookingFor",children:[Object(E.jsx)(M.a.Label,{children:"Looking For"}),Object(E.jsx)(M.a.Control,{name:"lookingFor",type:"text",placeholder:"guitar player, singer...",defaultValue:t.lookingFor}),Object(E.jsx)(M.a.Text,{className:"text-muted",children:"Please leave it empty if you're not looking for a musician."})]}),Object(E.jsxs)(M.a.Group,{controlId:"aboutMe",children:[Object(E.jsx)(M.a.Label,{children:"About Me"}),Object(E.jsx)(M.a.Control,{name:"aboutMe",type:"text",placeholder:"About me",defaultValue:t.aboutMe})]}),Object(E.jsx)(N.a,{className:"button",type:"submit",children:"Submit"})]})]}):null}}]),a}(n.Component),K=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.user;return e?Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Edit Owner Profile"}),Object(E.jsxs)(M.a,{onSubmit:this.props.onEdit,children:[Object(E.jsxs)(M.a.Group,{controlId:"firstName",children:[Object(E.jsx)(M.a.Label,{children:"First Name"}),Object(E.jsx)(M.a.Control,{name:"firstName",type:"text",placeholder:"Enter Name",defaultValue:e.firstName})]}),Object(E.jsxs)(M.a.Group,{controlId:"lastName",children:[Object(E.jsx)(M.a.Label,{children:"Last Name"}),Object(E.jsx)(M.a.Control,{name:"lastName",type:"text",placeholder:"Last Name",defaultValue:e.lastName})]}),Object(E.jsx)(N.a,{className:"button",type:"submit",children:"Submit"})]})]}):null}}]),a}(n.Component),Q=a(179),X=a(102),ee=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={imageList:[],imgUrl:null},e.handleAddImg=function(t){t.preventDefault();var a=e.state,n=a.imgUrl,c=a.imageList;n&&e.setState({imageList:[].concat(Object(l.a)(c),[n]),imgUrl:""})},e.handleImgChange=function(t){var a=t.target.value;e.setState({imgUrl:a})},e.handleDeleteImg=function(t){var a=e.state.imageList,n=JSON.parse(JSON.stringify(a));n.splice(t,1),e.setState({imageList:n})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.props.onAdd,a=this.state.imageList;return Object(E.jsx)("div",{children:Object(E.jsxs)(M.a,{onSubmit:function(e){t(e,a)},children:[Object(E.jsxs)(M.a.Group,{controlId:"title",children:[Object(E.jsx)(M.a.Label,{children:"Title"}),Object(E.jsx)(M.a.Control,{name:"title",type:"text",placeholder:"Enter title"})]}),Object(E.jsxs)(M.a.Group,{controlId:"location",children:[Object(E.jsx)(M.a.Label,{children:"Location"}),Object(E.jsx)(M.a.Control,{name:"location",type:"text",placeholder:"Location"})]}),Object(E.jsxs)(M.a.Group,{controlId:"size",children:[Object(E.jsxs)(M.a.Label,{children:["Size (m",Object(E.jsx)("sup",{children:"2"}),")"]}),Object(E.jsx)(M.a.Control,{name:"size",type:"text",placeholder:"Size"})]}),Object(E.jsx)(M.a.Label,{children:"Images"}),Object(E.jsxs)(Q.a,{className:"mb-3",children:[Object(E.jsx)(X.a,{placeholder:"image url","aria-describedby":"basic-addon2",name:"imgUrl",onChange:this.handleImgChange}),Object(E.jsx)(Q.a.Append,{children:Object(E.jsx)(N.a,{onClick:this.handleAddImg,variant:"outline-secondary",children:"Add image"})})]}),Object(E.jsx)("ul",{children:a.map((function(t,a){return Object(E.jsxs)("li",{children:[Object(E.jsx)("img",{className:"thumbnail",src:t,alt:"room"}),Object(E.jsx)(N.a,{onClick:function(){e.handleDeleteImg(a)},className:"x-btn",variant:"danger",children:"x"})]},a)}))}),Object(E.jsx)(N.a,{className:"button",type:"submit",children:"Submit"})]})})}}]),a}(n.Component),te=a(76),ae=a.n(te),ne=a(103),ce=a(104),re=a.n(ce),se="localhost:5005/";var ie=function(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),i=Object(S.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(""),d=Object(S.a)(j,2),h=d[0],b=d[1],O=Object(n.useState)(""),x=Object(S.a)(O,2),f=x[0],g=x[1],v=Object(n.useState)(""),y=Object(S.a)(v,2),N=y[0],C=y[1],w=Object(n.useState)([]),k=Object(S.a)(w,2),I=k[0],L=k[1];Object(n.useEffect)((function(){H=re()(se),g(e.match.params.userId),b(e.user)}),[se]),Object(n.useEffect)((function(){H.on("receive_message",(function(e){L([].concat(Object(l.a)(I),[e]))}))}));var U=function(){var e=Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={room:o,to:f,from:h._id,content:{author:h.firstName,message:N}},e.next=3,H.emit("send_message",t);case 3:L([].concat(Object(l.a)(I),[t.content])),C("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)("div",{className:"App",children:c?Object(E.jsxs)("div",{className:"chatContainer",children:[Object(E.jsx)("div",{className:"messages",children:I.map((function(e,t){return Object(E.jsx)("div",{className:"messageContainer",id:e.author===h.firstName?"You":"Other",children:Object(E.jsxs)("div",{className:"messageIndividual",children:[e.author,": ",e.message]})})}))}),Object(E.jsxs)("div",{className:"messageInputs",children:[Object(E.jsx)("input",{type:"text",placeholder:"Message...",value:N,onChange:function(e){C(e.target.value)}}),Object(E.jsx)("button",{onClick:U,children:"Send"})]})]}):Object(E.jsx)("div",{className:"logIn",children:Object(E.jsx)("button",{onClick:function(){m.a.get("".concat(p,"/api/chat/").concat(h._id)).then((function(e){console.log("----data----",e.data),L(e.data)})).catch((function(){})),console.log("--getblock---",I);var e=I.map((function(e){return e.room}));e.includes(f.toString()+h._id.toString())?u(f.toString()+h._id.toString()):u(h._id.toString()+f.toString()),console.log("rooms",e),r(!0),H.emit("join_room",o)},children:"Enter Chat"})})})},le=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={venue:null,imageList:[],imgUrl:null},e.handleAddImg=function(t){t.preventDefault();var a=e.state,n=a.imgUrl,c=a.imageList;n&&e.setState({imageList:[].concat(Object(l.a)(c),[n]),imgUrl:""})},e.handleImgChange=function(t){var a=t.target.value;e.setState({imgUrl:a})},e.handleDeleteImg=function(t){var a=e.state.imageList,n=JSON.parse(JSON.stringify(a));n.splice(t,1),e.setState({imageList:n})},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.venueId;m.a.get("".concat(p,"/api/venue/").concat(t)).then((function(t){console.log("venue-----",t.data),e.setState({venue:t.data,imageList:t.data.imgUrl})})).catch((function(e){console.log("Get venue failed",e)}))}},{key:"render",value:function(){var e=this;console.log("------",this.state.imageList);var t=this.state,a=t.venue,n=t.imageList,c=this.props.onEdit;return a?Object(E.jsx)("div",{children:Object(E.jsxs)(M.a,{onSubmit:function(e){c(e,a._id,n)},children:[Object(E.jsxs)(M.a.Group,{controlId:"title",children:[Object(E.jsx)(M.a.Label,{children:"Title"}),Object(E.jsx)(M.a.Control,{name:"title",type:"text",placeholder:"Enter title",defaultValue:a.title})]}),Object(E.jsxs)(M.a.Group,{controlId:"location",children:[Object(E.jsx)(M.a.Label,{children:"Location"}),Object(E.jsx)(M.a.Control,{name:"location",type:"text",placeholder:"Location",defaultValue:a.location})]}),Object(E.jsxs)(M.a.Group,{controlId:"size",children:[Object(E.jsxs)(M.a.Label,{children:["Size (m",Object(E.jsx)("sup",{children:"2"}),")"]}),Object(E.jsx)(M.a.Control,{name:"size",type:"text",placeholder:"Size (m^2)",defaultValue:a.size})]}),Object(E.jsx)(M.a.Label,{children:"Images"}),Object(E.jsxs)(Q.a,{className:"mb-3",children:[Object(E.jsx)(X.a,{placeholder:"image url","aria-describedby":"basic-addon2",name:"imgUrl",onChange:this.handleImgChange}),Object(E.jsx)(Q.a.Append,{children:Object(E.jsx)(N.a,{onClick:this.handleAddImg,variant:"outline-secondary",children:"Add image"})})]}),Object(E.jsx)("ul",{children:n.map((function(t,a){return Object(E.jsxs)("li",{children:[Object(E.jsx)("img",{className:"thumbnail",src:t,alt:"room"}),Object(E.jsx)(N.a,{onClick:function(){e.handleDeleteImg(a)},className:"x-btn",variant:"danger",children:"x"})]},a)}))}),Object(E.jsx)(N.a,{className:"button",type:"submit",children:"Submit"})]})}):null}}]),a}(n.Component),oe=(a(165),a(183)),ue=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={venue:null},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.venueId;m.a.get("".concat(p,"/api/venue/").concat(t)).then((function(t){console.log("venue-id-------",t.data),e.setState({venue:t.data})})).catch((function(e){console.log("get venue failed",e)}))}},{key:"render",value:function(){var e=this,t=this.state.venue;return t?Object(E.jsxs)("div",{className:"venue-box",children:[Object(E.jsx)(oe.a,{children:t.imgUrl.map((function(e,a){return Object(E.jsx)(oe.a.Item,{children:Object(E.jsx)("img",{src:e,alt:"slide ".concat(t.imgUrl.indexOf(e))})},a)}))}),Object(E.jsx)("div",{children:t.title}),Object(E.jsxs)("div",{children:["Location: ",t.location]}),Object(E.jsxs)("div",{children:["Size: ",t.size,"m",Object(E.jsx)("sup",{children:"2"})]}),Object(E.jsxs)("div",{className:"buttons",children:[Object(E.jsx)(N.a,{className:"button",as:y.b,to:"/venue/".concat(t._id,"/edit"),children:"Edit"}),Object(E.jsx)(N.a,{className:"button",onClick:function(){e.props.onDelete(t._id)},children:"Delete"})]})]}):null}}]),a}(n.Component),je=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:null},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("musician prop-------",this.props);var t=this.props.match.params.musicianId;console.log(t),m.a.get("".concat(p,"/api/musician/").concat(t)).then((function(t){console.log("musician id-----",t.data),e.setState({user:t.data})})).catch((function(e){console.log("Get musician failed",e)}))}},{key:"render",value:function(){var e=this.state.user;return e?Object(E.jsx)("div",{className:"profile-page",children:Object(E.jsxs)(B.a,{className:"card-style",children:[Object(E.jsx)(B.a.Img,{variant:"top",src:e.imgUrl}),Object(E.jsxs)(B.a.Body,{children:[Object(E.jsxs)(B.a.Title,{children:[e.firstName," ",e.lastName]}),Object(E.jsx)(B.a.Subtitle,{className:"mb-2 text-muted",children:e.location}),Object(E.jsx)(B.a.Text,{children:e.aboutMe}),Object(E.jsx)(B.a.Text,{children:e.genre}),Object(E.jsx)(B.a.Text,{children:e.instrument}),Object(E.jsx)(B.a.Text,{children:e.bandName}),Object(E.jsx)(B.a.Link,{as:y.b,className:"edit-btn",to:"/chat/".concat(this.props.match.params.musicianId),children:"Send a message"})]})]})}):null}}]),a}(n.Component),de=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={venue:null},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("venue props=-------",this.props);var t=this.props.match.params.venueId;m.a.get("".concat(p,"/api/venuesDetails/").concat(t)).then((function(t){console.log("venue id-----",t.data),e.setState({venue:t.data})})).catch((function(e){console.log("Get venue failed in search details",e)}))}},{key:"render",value:function(){var e=this.state.venue;return e?Object(E.jsx)("div",{className:"profile-page",children:Object(E.jsxs)(B.a,{className:"card-style",style:{width:"18rem"},children:[Object(E.jsx)(B.a.Img,{variant:"top",src:e.imgUrl}),Object(E.jsxs)(B.a.Body,{children:[Object(E.jsx)(B.a.Title,{children:e.title}),Object(E.jsx)(B.a.Subtitle,{className:"mb-2 text-muted",children:e.location}),Object(E.jsx)(B.a.Text,{children:e.size}),Object(E.jsx)(B.a.Link,{className:"edit-btn",to:"/chat",children:"Send a message"})]})]})}):null}}]),a}(n.Component),he=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(E.jsx)("div",{children:Object(E.jsxs)(M.a,{className:"upload-form",onSubmit:this.props.onUpload,children:[Object(E.jsx)(M.a.Group,{controlId:"userImg",children:Object(E.jsx)(M.a.File,{name:"userImg",type:"file",label:"Upload picture"})}),Object(E.jsx)(N.a,{className:"button",type:"submit",children:"Submit"})]})})}}]),a}(n.Component),be=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:null,isMounted:!1,users:[],filteredUsers:[],usersLookingFor:[],filteredUsersLookingFor:[],venues:[],filteredVenues:[],instrument:[],genre:[],size:0,location:[],title:[]},e.handleEditMusician=function(t){t.preventDefault();var a=e.state,n=a.user,c=a.users,r={firstName:t.target.firstName.value,lastName:t.target.lastName.value,instrument:t.target.instrument.value,genre:t.target.genre.value,location:t.target.location.value,bandName:t.target.bandName.value,aboutMe:t.target.aboutMe.value,lookingFor:t.target.lookingFor.value};m.a.patch("".concat(p,"/api/musician-profile/").concat(n._id),r,{withCredentials:!0}).then((function(t){console.log("-----edit----",t.data);var a=c.map((function(e){return n._id===e._id&&(e=t.data),e})),r=a.filter((function(e){return e.lookingFor}));e.setState({user:t.data,users:a,filteredUsers:a,usersLookingFor:r,filteredUsersLookingFor:r},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Edit musician failed",e)}))},e.handleEditOwner=function(t){t.preventDefault();var a=e.state.user,n={firstName:t.target.firstName.value,lastName:t.target.lastName.value};m.a.patch("".concat(p,"/api/owner-profile/").concat(a._id),n,{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Edit owner failed",e)}))},e.handleUploadImage=function(t){t.preventDefault();var a=e.state,n=a.user,c=a.users,r=t.target.userImg.files[0],s=new FormData;s.append("imageUrl",r),m.a.post("".concat(p,"/api/upload"),s).then((function(t){var a=t.data.image,r=n.type;m.a.patch("".concat(p,"/api/upload/").concat(n._id),{imgUrl:a,type:r},{withCredentials:!0}).then((function(t){console.log(t.data);var a=c.map((function(e){return n._id===e._id&&(e=t.data),e}));e.setState({user:t.data,users:a,filteredUsers:a},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Error uploading musician image",e)}))})).catch((function(e){console.log("Error while uploading musician image",e)}))},e.handleSignUp=function(t){t.preventDefault();var a={email:t.target.email.value,password:t.target.password.value,type:t.target.type.value};m.a.post("".concat(p,"/api/signup"),a).then((function(a){console.log("all data",a),console.log("response.data",a.data),e.handleSignIn(t)})).catch((function(e){console.log("Error while signin up",e)}))},e.handleSignIn=function(t){t.preventDefault();var a={email:t.target.email.value,password:t.target.password.value};m.a.post("".concat(p,"/api/signin"),a,{withCredentials:!0}).then((function(t){console.log("Succesfully signed in --------",t.data),e.setState({user:t.data},(function(){e.props.history.push("/home")}))})).catch((function(e){console.log("Error while signin in",e)}))},e.handleSignOut=function(){m.a.post("".concat(p,"/api/signout"),{},{withCredentials:!0}).then((function(){console.log("LOGOUT_____"),e.setState({user:null},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Error while signin out",e)}))},e.onMusicianSearch=function(t){var a=t.target.name,n=t.target.value.split(" ");switch(a){case"instrument":e.setState({instrument:n},e.handleMusicianSearch);break;case"genre":e.setState({genre:n},e.handleMusicianSearch)}},e.handleMusicianSearch=function(){var t=e.state,a=t.instrument,n=t.genre;console.log(a,n);var c=JSON.parse(JSON.stringify(e.state.users)).filter((function(e){if(!a.length)return!0;for(var t=0;t<a.length;t++){if(t>0&&!a[t])return!1;var n,c=Object(o.a)(e.instrument);try{for(c.s();!(n=c.n()).done;){if(n.value.toLowerCase().includes(a[t].toLowerCase()))return!0}}catch(r){c.e(r)}finally{c.f()}}}));c=c.filter((function(e){if(!n.length)return!0;for(var t=0;t<n.length;t++){if(t>0&&!n[t])return!1;var a,c=Object(o.a)(e.genre);try{for(c.s();!(a=c.n()).done;){if(a.value.toLowerCase().includes(n[t].toLowerCase()))return!0}}catch(r){c.e(r)}finally{c.f()}}})),e.setState({filteredUsers:c})},e.onBandSearch=function(t){var a=t.target.name,n=t.target.value.split(" ");switch(a){case"instrument":e.setState({instrument:n},e.handleBandSearch);break;case"genre":e.setState({genre:n},e.handleBandSearch)}},e.handleBandSearch=function(){var t=e.state,a=t.instrument,n=t.genre;console.log(a,n);var c=JSON.parse(JSON.stringify(e.state.usersLookingFor)).filter((function(e){if(!a.length)return!0;for(var t=0;t<a.length;t++){if(t>0&&!a[t])return!1;if(e.lookingFor.toLowerCase().includes(a[t].toLowerCase()))return!0}}));c=c.filter((function(e){if(!n.length)return!0;for(var t=0;t<n.length;t++){if(t>0&&!n[t])return!1;var a,c=Object(o.a)(e.genre);try{for(c.s();!(a=c.n()).done;){if(a.value.toLowerCase().includes(n[t].toLowerCase()))return!0}}catch(r){c.e(r)}finally{c.f()}}})),e.setState({filteredUsersLookingFor:c})},e.onVenueSearch=function(t){var a=t.target.name,n=t.target.value.split(" ");switch(a){case"size":e.setState({size:n[0]},e.handleVenueSearch);break;case"location":e.setState({location:n},e.handleVenueSearch);break;case"title":e.setState({title:n},e.handleVenueSearch)}},e.handleVenueSearch=function(){var t=JSON.parse(JSON.stringify(e.state.venues)),a=e.state,n=a.size,c=a.location,r=a.title,s=t.filter((function(e){return!Number(n)||Number(n)&&e.size<=n}));s=(s=s.filter((function(e){if(!c.length)return!0;for(var t=0;t<c.length;t++){if(t>0&&!c[t])return!1;if(e.location.toLowerCase().includes(c[t].toLowerCase()))return!0}}))).filter((function(e){if(!r.length)return!0;for(var t=0;t<r.length;t++){if(t>0&&!r[t])return!1;if(e.title.toLowerCase().includes(r[t].toLowerCase()))return!0}})),e.setState({filteredVenues:s})},e.handleAddVenue=function(t,a){t.preventDefault();var n=e.state.user,c=t.target,r=c.title,s=c.location,i=c.size,o={title:r.value,location:s.value,size:i.value,ownerId:n._id,imgUrl:a};m.a.post("".concat(p,"/api/add-venue"),o).then((function(t){console.log(t.data),e.setState({venues:[].concat(Object(l.a)(e.state.venues),[t.data]),filteredVenues:[].concat(Object(l.a)(e.state.venues),[t.data])},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Errow while adding new venue",e)}))},e.handleEditVenue=function(t,a,n){t.preventDefault();var c=e.state.venues,r=t.target,s=r.title,i=r.location,l=r.size,o={title:s.value,location:i.value,size:l.value,imgUrl:n};m.a.patch("".concat(p,"/api/venue/").concat(a),o,{withCredentials:!0}).then((function(t){console.log("venue edited: ",t.data);var n=c.map((function(e){return e._id===a&&(e=t.data),e}));e.setState({venues:n,filteredVenues:n},(function(){e.props.history.push("/venue/".concat(a))}))})).catch((function(e){console.log("Error while editing venue",e)}))},e.handleDeleteVenue=function(t){var a=e.state.venues,n=JSON.parse(JSON.stringify(a));m.a.delete("".concat(p,"/api/venue/").concat(t)).then((function(a){var c=n.filter((function(e){return e._id!==t}));e.setState({venues:c,filteredVenues:c},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Error while deleting venue",e)}))},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.user),m.a.get("".concat(p,"/api/users")).then((function(t){var a=t.data.filter((function(e){return e.lookingFor}));e.setState({users:t.data,filteredUsers:t.data,usersLookingFor:a,filteredUsersLookingFor:a})})).catch((function(e){console.log("Fetching users failed",e)})),m.a.get("".concat(p,"/api/venues")).then((function(t){e.setState({venues:t.data,filteredVenues:t.data})})).catch((function(){console.log("Fetching venues failed")})),this.state.user||m.a.get("".concat(p,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data})})).catch((function(e){console.log("Error gettin logged in user-----",e)})),this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=(t.users,t.filteredUsers),c=t.venues,r=t.filteredVenues,s=t.filteredUsersLookingFor;return this.state.isMounted?Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(A,{user:a,onSignUp:this.handleSignUp,onSignIn:this.handleSignIn,onSignOut:this.handleSignOut}),Object(E.jsx)("div",{className:"page",children:Object(E.jsxs)(b.c,{children:[Object(E.jsx)(b.a,{exact:!0,path:"/",render:function(e){return Object(E.jsx)(z,Object(i.a)({},e))}}),Object(E.jsx)(b.a,{path:"/home",render:function(e){return Object(E.jsx)(D,Object(i.a)(Object(i.a)({},e),{},{user:a}))}}),Object(E.jsx)(b.a,{path:"/search/musicians",render:function(t){return Object(E.jsx)(P,Object(i.a)({user:a,filteredUsers:n,onSearch:e.onMusicianSearch},t))}}),Object(E.jsx)(b.a,{path:"/search/bands",render:function(t){return Object(E.jsx)(q,Object(i.a)({user:a,filteredUsers:s,onSearch:e.onBandSearch},t))}}),Object(E.jsx)(b.a,{path:"/search/venues",render:function(t){return Object(E.jsx)(Z,Object(i.a)({user:a,filteredVenues:r,onSearch:e.onVenueSearch},t))}}),Object(E.jsx)(b.a,{exact:!0,path:"/profile",render:function(e){return Object(E.jsx)($,Object(i.a)({user:a,venues:c},e))}}),Object(E.jsx)(b.a,{path:"/upload-image",render:function(t){return Object(E.jsx)(he,Object(i.a)(Object(i.a)({},t),{},{user:a,onUpload:e.handleUploadImage}))}}),Object(E.jsx)(b.a,{exact:!0,path:"/musician-profile/edit",render:function(t){return Object(E.jsx)(W,Object(i.a)(Object(i.a)({user:a,onImageUpload:e.handleUploadImage},t),{},{onEdit:e.handleEditMusician}))}}),Object(E.jsx)(b.a,{exact:!0,path:"/musician/:musicianId",render:function(e){return Object(E.jsx)(je,Object(i.a)({},e))}}),Object(E.jsx)(b.a,{exact:!0,path:"/owner-profile/edit",render:function(t){return Object(E.jsx)(K,Object(i.a)(Object(i.a)({user:a},t),{},{onEdit:e.handleEditOwner}))}}),Object(E.jsx)(b.a,{path:"/add-venue",render:function(t){return Object(E.jsx)(ee,Object(i.a)(Object(i.a)({},t),{},{onAdd:e.handleAddVenue}))}}),Object(E.jsx)(b.a,{exact:!0,path:"/venue/:venueId",render:function(t){return Object(E.jsx)(ue,Object(i.a)(Object(i.a)({},t),{},{onDelete:e.handleDeleteVenue}))}}),Object(E.jsx)(b.a,{path:"/venue/:venueId/edit",render:function(t){return Object(E.jsx)(le,Object(i.a)(Object(i.a)({},t),{},{onEdit:e.handleEditVenue}))}}),Object(E.jsx)(b.a,{exact:!0,path:"/venuesDetails/:venueId",render:function(e){return Object(E.jsx)(de,Object(i.a)({},e))}}),Object(E.jsx)(b.a,{path:"/chat/:userId",render:function(e){return Object(E.jsx)(ie,Object(i.a)(Object(i.a)({},e),{},{user:a}))}}),Object(E.jsx)(b.a,{path:"*",component:J})]})})]}):null}}]),a}(n.Component),Oe=Object(b.f)(be);s.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(y.a,{children:Object(E.jsx)(Oe,{})})}),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.023824eb.chunk.js.map